<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAITRI AI - Crew Assistant</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Added Chart.js for the dashboard mood trend chart -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <div class="app-container">

        <!-- Login Page (Unchanged) -->
        <div id="login-page" class="page active">
            <div class="login-box">
                <div class="logo">MAITRI AI ðŸš€</div>
                <h2>Crew & Mission Control Portal</h2>
                <form id="login-form">
                    <div class="input-group">
                        <label for="role-select">Select Your Role</label>
                        <select id="role-select" name="role">
                            <option value="crew">Crew Member</option>
                            <option value="control" disabled>Mission Control Official</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="username">Username</label>
                        <input type="text" id="username" name="username" value="vyomanaut" required>
                    </div>
                    <div class="input-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" name="password" value="gagan2025" required>
                    </div>
                    <button type="submit" class="btn-primary">Login</button>
                    <p id="login-error" class="error-message"></p>
                </form>
            </div>
        </div>

        <!-- Home Page (Upgraded to Dashboard) -->
        <div id="home-page" class="page">
            <header class="app-header">
                <div class="header-left">
                    <h1>Welcome, Vyomanaut</h1>
                    <p class="mission-patch">Mission: GAGAN-1</p>
                </div>
                <button id="logout-btn" class="btn-secondary">Logout</button>
            </header>
            <div class="dashboard-grid">
                <div class="card main-action">
                    <h3>Start New Session</h3>
                    <p>Begin your scheduled psychological check-in.</p>
                    <button id="start-session-btn" class="btn-primary btn-large">Start Now</button>
                    <div class="countdown">
                        <h4>Next Session In:</h4>
                        <p id="next-session-countdown">12h 45m 30s</p>
                    </div>
                </div>
                <div class="card chart-card">
                    <h3>Mood Trend (Last 5 Sessions)</h3>
                    <canvas id="mood-chart"></canvas>
                </div>
                <div class="card">
                    <h3>Last Session Summary</h3>
                    <div class="summary-item">
                        <span>Date:</span>
                        <span id="summary-date">Oct 02, 2025</span>
                    </div>
                     <div class="summary-item">
                        <span>Stress Level:</span>
                        <span id="summary-stress" class="stress-medium">Medium</span>
                    </div>
                     <div class="summary-item">
                        <span>Mood State:</span>
                        <span id="summary-mood">Tired</span>
                    </div>
                </div>
                <div class="card">
                    <h3>Health Snapshot</h3>
                    <div class="summary-item">
                        <span>Heart Rate (avg):</span>
                        <span>68 bpm</span>
                    </div>
                     <div class="summary-item">
                        <span>Average Sleep:</span>
                        <span>6.2 hrs</span>
                    </div>
                     <div class="summary-item">
                        <span>Current Stress:</span>
                        <span class="stress-medium">Medium</span>
                    </div>
                </div>
                <div class="card mission-log-card">
                    <h3>Mission Log</h3>
                    <ul id="mission-log-list">
                        <!-- Log items will be injected by JS -->
                    </ul>
                </div>
            </div>
        </div>

        <!-- Session Page (Unchanged) -->
        <div id="session-page" class="page">
            <div class="session-container">
                <video id="camera-feed" autoplay playsinline></video>
                <div class="session-content">
                    <h2>Read the following paragraph aloud</h2>
                    <p id="reading-text">
                        The expanse of space is a canvas of silent, shimmering stars. Here, aboard this vessel, we are pioneers charting a course through the cosmic ocean. Every system check, every observation, and every shared moment contributes to the legacy of human exploration. The hum of the life support system is a constant reminder of the delicate balance we maintain, a testament to the ingenuity that brought us here, so far from home yet closer than ever to understanding our place in the universe.
                    </p>
                    <div class="session-timer">
                        <p>Session ending in <span id="session-countdown">45</span>s</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Evaluation Page (Unchanged) -->
        <div id="evaluation-page" class="page">
             <header class="app-header">
                <h1>Psychological Evaluation</h1>
            </header>
            <div class="evaluation-container">
                <div id="question-container">
                    <!-- Questions injected by JS -->
                </div>
                <div class="navigation-buttons">
                    <button id="back-btn" class="btn-secondary">Back</button>
                    <button id="next-btn" class="btn-primary">Next</button>
                    <button id="submit-eval-btn" class="btn-primary" style="display: none;">Submit Evaluation</button>
                </div>
            </div>
        </div>

        <!-- Report Page (Button text/functionality changed) -->
        <div id="report-page" class="page">
             <header class="app-header">
                <h1>Session Report</h1>
            </header>
            <div class="report-container">
                <div class="card">
                    <h3>AI Analysis Summary</h3>
                    <div class="report-grid">
                        <div>
                            <strong>Detected Emotion:</strong>
                            <p id="report-emotion"></p>
                        </div>
                        <div>
                            <strong>Calculated Stress Level:</strong>
                            <p id="report-risk"></p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <h3>Recommendations</h3>
                    <p id="report-recommendation"></p>
                </div>

                <div id="calming-music-section" class="card" style="display: none;">
                    <h3>We've noticed you might be stressed.</h3>
                    <p>Here are some calming sounds selected for you. Please take a moment to relax.</p>
                    <audio id="calming-audio" controls>
                        <source src="https://cdn.pixabay.com/audio/2022/11/17/audio_83fa7f0665.mp3" type="audio/mpeg">
                        Your browser does not support the audio element.
                    </audio>
                </div>
                
                <button id="proceed-to-companion-btn" class="btn-primary">Proceed to AI Companion</button>
            </div>
        </div>

        <!-- New Companion Page -->
        <div id="companion-page" class="page">
            <header class="app-header">
                 <div class="header-left">
                    <h1>MAITRI AI Companion</h1>
                    <p class="mission-patch">Vyomanaut | Mission: GAGAN-1</p>
                </div>
                 <button id="end-companion-btn" class="btn-secondary">End Chat & Return Home</button>
            </header>
            <div class="chat-container">
                <div id="chat-messages">
                    <!-- Chat messages will be injected here -->
                </div>
                <div id="suggested-replies">
                     <!-- Suggested replies will be injected here -->
                </div>
            </div>
            <form id="chat-form" class="chat-input-form">
                <input type="text" id="chat-input" placeholder="Type your message..." autocomplete="off">
                <button type="submit" class="btn-primary">Send</button>
            </form>
        </div>

    </div> 
    <script src="script.js"></script>
</body>
</html>
